# Variables de entorno para el servicio SSO con Google OAuth

# ============================================
# CONFIGURACIÓN DEL SERVIDOR
# ============================================
PORT=3000
NODE_ENV=development

# ============================================
# CONFIGURACIÓN DE BASE DE DATOS (MariaDB)
# ============================================
DB_HOST=localhost
DB_PORT=3306
DB_NAME=sso_general
DB_USER=sso_general
DB_PASSWORD=sso_general

# ============================================
# CONFIGURACIÓN DE GOOGLE OAUTH
# ============================================
GOOGLE_CLIENT_ID=your_google_client_id_here
GOOGLE_CLIENT_SECRET=your_google_client_secret_here
GOOGLE_CALLBACK_URL=https://auth.greenborn.com.ar/auth/google/callback

# ============================================
# CONFIGURACIÓN DE SESIÓN
# ============================================
SESSION_SECRET=your_super_secret_session_key_here_at_least_32_chars

# ============================================
# CONFIGURACIÓN DE JWT
# ============================================
# Secret para firmar tokens JWT (mínimo 32 caracteres)
JWT_SECRET=your_jwt_secret_key_here_at_least_32_characters
JWT_ALGORITHM=HS256

# ============================================
# CONFIGURACIÓN DE TOKENS
# ============================================
# Tiempo de expiración del token temporal (en segundos) - Después de OAuth
TEMPORAL_TOKEN_EXPIRY=600
# 600 segundos = 10 minutos

# Tiempo de expiración del bearer token (en segundos)
BEARER_TOKEN_EXPIRY=86400
# 86400 segundos = 24 horas

# Umbral para renovar token (en segundos)
# Si quedan menos de estos segundos, se extiende la duración
TOKEN_RENEWAL_THRESHOLD=3600
# 3600 segundos = 1 hora

# ============================================
# CONFIGURACIÓN DE ENCRIPTACIÓN
# ============================================
# Clave de 64 caracteres hexadecimales para encriptar tokens de Google
# Generar con: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
ENCRYPTION_KEY=0123456789abcdef0123456789abcdef0123456789abcdef0123456789abcdef

# ============================================
# CONFIGURACIÓN DE RATE LIMITING
# ============================================
# Ventana de tiempo en milisegundos
RATE_LIMIT_WINDOW_MS=900000
# 900000 ms = 15 minutos

# Máximo de requests por ventana
RATE_LIMIT_MAX_REQUESTS=100

# Deshabilitar rate limiting en desarrollo (true/false)
DISABLE_RATE_LIMIT=false

# ============================================
# URLS DE LA APLICACIÓN
# ============================================
# Base URL de la aplicación (puedes separar múltiples orígenes con coma)
BASE_URL=https://auth.greenborn.com.ar,https://buscar.mismascotas.top

# URLs de redirección para éxito y fallo (legacy, opcional)
SUCCESS_REDIRECT_URL=https://buscar.mismascotas.top/auth/success
FAILURE_REDIRECT_URL=https://buscar.mismascotas.top/auth/failure

# ============================================
# NOTAS IMPORTANTES
# ============================================
# 
# 1. En producción, asegúrate de cambiar TODOS los valores por defecto
# 2. SESSION_SECRET, JWT_SECRET y ENCRYPTION_KEY deben ser únicos y seguros
# 3. Nunca compartas estos valores ni los subas a repositorios públicos
# 4. Para generar ENCRYPTION_KEY: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# 5. Las URLs permitidas se configuran en la tabla 'allowed_apps' de la base de datos
#